var request=require('request');
var cheerio=require('cheerio');
/*
cool, si has llegado hasta aqui, mis respetos.
request sirve para cargar el contenido de una pagina web.
cherrio para moverse dentro del dom de dicha web.
*/
module.exports.estrenos=function(res){	
	request('http://www.papaya.pe/',function(err,resp,body){
		if(!err){
			$=cheerio.load(body);
			var estrenos=new Array();
			var $estrenos=$(".img.movies");
			var $len=$estrenos.children().length;
			$estrenos.each(function(i,elem){
				if($(this).children().hasClass('f_estreno')){
					estrenos.push($(this).html());
				}else{

				}
			})
			res.send({
				imagen:estrenos
			})
		}
	})
}
/*todo se reduce a esto:
linea 9 request(------)
	carga la pagina, si no hubo errores dile a cheerio que puede cargar el dom de dicha 
	pagina(lineas 10 y 11)
linea 13 var $estrenos=$(".img.movies");
	en papaya.pe la clase img.movies es un contenedor que tiene dentro el contenido de las
	peliculas y posee un elemento que contiene una clase llamada f_estreno, la cual nos dice
	si la pelicula esta en estreno actualmente o cuando se estrenara.

linea 17 estrenos.push($(this).html());
	cargamos dichos elementos si estan en estreno y los agregamos a un arreglo

linea 22res.send ..
	botamos el contenido de la operacion en una web... fin XD
*/




		